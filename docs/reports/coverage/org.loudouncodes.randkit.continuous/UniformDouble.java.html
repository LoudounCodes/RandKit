<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>UniformDouble.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">randkit</a> &gt; <a href="index.source.html" class="el_package">org.loudouncodes.randkit.continuous</a> &gt; <span class="el_source">UniformDouble.java</span></div><h1>UniformDouble.java</h1><pre class="source lang-java linenums">package org.loudouncodes.randkit.continuous;

import java.util.random.RandomGenerator;
import org.loudouncodes.randkit.api.ContinuousDistribution;
import org.loudouncodes.randkit.api.DistributionSupport;
import org.loudouncodes.randkit.util.Randoms;

/**
 * Continuous Uniform(a, b) on the half-open interval {@code [a, b)} with {@code a &lt; b}.
 *
 * &lt;p&gt;PDF: {@code f(x) = 1 / (b - a)} for {@code x ∈ [a, b)}, else 0.&lt;br&gt;
 * CDF: {@code F(x) = 0} for {@code x ≤ a}; {@code (x - a)/(b - a)} for {@code a &lt; x &lt; b}; and
 * {@code 1} for {@code x ≥ b}.
 */
public final class UniformDouble implements ContinuousDistribution {

  private final RandomGenerator rng;
  private final double a;
  private final double b;
  private final double width;

  /**
   * Constructs a UniformDouble(a, b) using a platform-provided, high-quality default RNG.
   *
   * @param a inclusive lower bound
   * @param b exclusive upper bound; must satisfy {@code a &lt; b}
   * @throws IllegalArgumentException if {@code a &gt;= b} or any bound is not finite
   */
  public UniformDouble(double a, double b) {
<span class="nc" id="L30">    this(Randoms.defaultGenerator(), a, b);</span>
<span class="nc" id="L31">  }</span>

  /**
   * Constructs a UniformDouble(a, b) with a deterministic seed.
   *
   * @param seed random seed for reproducibility
   * @param a inclusive lower bound
   * @param b exclusive upper bound; must satisfy {@code a &lt; b}
   * @throws IllegalArgumentException if {@code a &gt;= b} or any bound is not finite
   */
  public UniformDouble(long seed, double a, double b) {
<span class="fc" id="L42">    this(Randoms.seeded(seed), a, b);</span>
<span class="fc" id="L43">  }</span>

  /**
   * Constructs a UniformDouble(a, b) using the provided generator.
   *
   * @param rng non-null random generator supplying independent U(0,1) variates
   * @param a inclusive lower bound
   * @param b exclusive upper bound; must satisfy {@code a &lt; b}
   * @throws NullPointerException if {@code rng} is null
   * @throws IllegalArgumentException if {@code a &gt;= b} or any bound is not finite
   */
<span class="fc" id="L54">  public UniformDouble(RandomGenerator rng, double a, double b) {</span>
<span class="pc bpc" id="L55" title="1 of 2 branches missed.">    if (rng == null) throw new NullPointerException(&quot;rng must not be null&quot;);</span>
<span class="fc bfc" id="L56" title="All 4 branches covered.">    if (!Double.isFinite(a) || !Double.isFinite(b)) {</span>
<span class="fc" id="L57">      throw new IllegalArgumentException(&quot;Bounds must be finite&quot;);</span>
    }
<span class="fc bfc" id="L59" title="All 2 branches covered.">    if (!(a &lt; b)) {</span>
<span class="fc" id="L60">      throw new IllegalArgumentException(&quot;Require a &lt; b (got a=&quot; + a + &quot;, b=&quot; + b + &quot;)&quot;);</span>
    }
<span class="fc" id="L62">    this.rng = rng;</span>
<span class="fc" id="L63">    this.a = a;</span>
<span class="fc" id="L64">    this.b = b;</span>
<span class="fc" id="L65">    this.width = b - a;</span>
<span class="fc" id="L66">  }</span>

  /** {@inheritDoc} */
  @Override
  public double sample() {
<span class="fc" id="L71">    return a + rng.nextDouble() * width; // maps U[0,1) -&gt; [a,b)</span>
  }

  /** {@inheritDoc} */
  @Override
  public double pdf(double x) {
<span class="fc bfc" id="L77" title="All 4 branches covered.">    return (x &gt;= a &amp;&amp; x &lt; b) ? (1.0 / width) : 0.0;</span>
  }

  /** {@inheritDoc} */
  @Override
  public double cdf(double x) {
<span class="fc bfc" id="L83" title="All 2 branches covered.">    if (x &lt;= a) return 0.0;</span>
<span class="fc bfc" id="L84" title="All 2 branches covered.">    if (x &gt;= b) return 1.0;</span>
<span class="fc" id="L85">    return (x - a) / width;</span>
  }

  /** {@inheritDoc} */
  @Override
  public double quantile(double p) {
<span class="fc bfc" id="L91" title="All 4 branches covered.">    if (!(p &gt;= 0.0 &amp;&amp; p &lt;= 1.0)) {</span>
<span class="fc" id="L92">      throw new IllegalArgumentException(&quot;p must be in [0,1], got &quot; + p);</span>
    }
<span class="fc bfc" id="L94" title="All 2 branches covered.">    if (p == 0.0) return a;</span>
<span class="fc bfc" id="L95" title="All 2 branches covered.">    if (p == 1.0) return b; // for [a,b) we return b at p=1 by convention</span>
<span class="fc" id="L96">    return a + p * width;</span>
  }

  /** {@inheritDoc} */
  @Override
  public double mean() {
<span class="nc" id="L102">    return 0.5 * (a + b);</span>
  }

  /** {@inheritDoc} */
  @Override
  public double variance() {
<span class="nc" id="L108">    return (width * width) / 12.0;</span>
  }

  /**
   * Returns the mathematical support of this distribution: the half-open interval [a, b).
   *
   * @return a {@link DistributionSupport} describing {@code [a, b)}
   */
  public DistributionSupport support() {
<span class="fc" id="L117">    return DistributionSupport.continuous(a, /* lowerClosed= */ true, b, /* upperClosed= */ false);</span>
  }

  /**
   * The inclusive lower bound {@code a}.
   *
   * @return the lower bound value {@code a}
   */
  public double lowerBound() {
<span class="nc" id="L126">    return a;</span>
  }

  /**
   * The exclusive upper bound {@code b}.
   *
   * @return the upper bound value {@code b}
   */
  public double upperBound() {
<span class="nc" id="L135">    return b;</span>
  }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>